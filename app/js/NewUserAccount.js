/**
 * Created by lenovo on 2017/7/12.
 */

function newUserAccount(MyID, MyPubkey) {
    //parameters:ID,Public key.return:Object of UserAccount.
    //Hint:It may take times to mine the new contract.
    var ID = MyID;
    var PubKey = MyPubkey;
    var UserAccount = web3.eth.contract([{
        "constant": false,
        "inputs": [{"name": "AName", "type": "bytes"}, {"name": "AUsername", "type": "bytes"}],
        "name": "getSocialAccount",
        "outputs": [{"name": "Name", "type": "bytes"}, {"name": "Username", "type": "bytes"}, {
            "name": "Password",
            "type": "bytes"
        }, {"name": "isFound", "type": "bool"}],
        "payable": false,
        "type": "function"
    }, {
        "constant": false,
        "inputs": [{"name": "Name", "type": "bytes"}, {"name": "Username", "type": "bytes"}, {
            "name": "NewPassword",
            "type": "bytes"
        }],
        "name": "AlterSocialAccountPassword",
        "outputs": [{"name": "isSuccessful", "type": "bool"}],
        "payable": false,
        "type": "function"
    }, {
        "constant": false,
        "inputs": [{"name": "CAddress", "type": "address"}],
        "name": "deleteContact",
        "outputs": [{"name": "isSuccessful", "type": "bool"}],
        "payable": false,
        "type": "function"
    }, {
        "constant": false,
        "inputs": [{"name": "CAddress", "type": "address"}, {"name": "CName", "type": "bytes"}],
        "name": "AlterContactName",
        "outputs": [{"name": "isSuccessful", "type": "bool"}],
        "payable": false,
        "type": "function"
    }, {
        "constant": false,
        "inputs": [],
        "name": "getPublicKey",
        "outputs": [{"name": "myPublickey", "type": "bytes"}],
        "payable": false,
        "type": "function"
    }, {
        "constant": false,
        "inputs": [],
        "name": "getUserID",
        "outputs": [{"name": "ID", "type": "bytes"}],
        "payable": false,
        "type": "function"
    }, {
        "constant": false,
        "inputs": [{"name": "Name", "type": "bytes"}, {"name": "Username", "type": "bytes"}, {
            "name": "Password",
            "type": "bytes"
        }],
        "name": "AddSocialAccount",
        "outputs": [],
        "payable": false,
        "type": "function"
    }, {
        "constant": false,
        "inputs": [{"name": "CAddress", "type": "address"}, {"name": "CPubkey", "type": "bytes"}],
        "name": "AlterContactPubkey",
        "outputs": [{"name": "isSuccessful", "type": "bool"}],
        "payable": false,
        "type": "function"
    }, {
        "constant": true,
        "inputs": [],
        "name": "MyPubKey",
        "outputs": [{"name": "", "type": "bytes"}],
        "payable": false,
        "type": "function"
    }, {
        "constant": false,
        "inputs": [{"name": "Name", "type": "bytes"}, {"name": "Username", "type": "bytes"}],
        "name": "deleteSocialAccount",
        "outputs": [{"name": "isSuccessful", "type": "bool"}],
        "payable": false,
        "type": "function"
    }, {
        "constant": false,
        "inputs": [{"name": "newPubKey", "type": "bytes"}],
        "name": "setPublicKey",
        "outputs": [],
        "payable": false,
        "type": "function"
    }, {
        "constant": false,
        "inputs": [{"name": "CName", "type": "bytes"}, {"name": "CPubkey", "type": "bytes"}, {
            "name": "CAddress",
            "type": "address"
        }],
        "name": "AddContact",
        "outputs": [],
        "payable": false,
        "type": "function"
    }, {
        "constant": false,
        "inputs": [{"name": "CAddress", "type": "address"}],
        "name": "getContact",
        "outputs": [{"name": "CName", "type": "bytes"}, {"name": "CPubKey", "type": "bytes"}, {
            "name": "ConAddress",
            "type": "address"
        }, {"name": "isFound", "type": "bool"}],
        "payable": false,
        "type": "function"
    }, {
        "inputs": [{"name": "ID", "type": "bytes"}, {"name": "PubKey", "type": "bytes"}],
        "payable": false,
        "type": "constructor"
    }]);
    var UserAccountInstance = UserAccount.new(
        ID,
        PubKey,
        {
            from: web3.eth.accounts[0],
            data: '0x606060405234156200000d57fe5b6040516200236638038062002366833981016040528080518201919060200180518201919050505b81600090805190602001906200004d92919062000070565b5080600190805190602001906200006692919062000070565b505b50506200011f565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f10620000b357805160ff1916838001178555620000e4565b82800160010185558215620000e4579182015b82811115620000e3578251825591602001919060010190620000c6565b5b509050620000f39190620000f7565b5090565b6200011c91905b8082111562000118576000816000905550600101620000fe565b5090565b90565b612237806200012f6000396000f300606060405236156100c3576000357c0100000000000000000000000000000000000000000000000000000000900463ffffffff168063036c322f146100c557806306319e09146102e85780631046bc68146103e057806320b6bf8f1461042e5780632e334452146104bf5780632eeb6d7f1461055857806354e140b7146105f1578063635bd4c8146106d1578063851605701461076257806386ad1ccd146107fb578063a91d58b4146108b0578063f87739c31461090a578063f96a181e146109c6575bfe5b34156100cd57fe5b610160600480803590602001908201803590602001908080601f0160208091040260200160405190810160405280939291908181526020018383808284378201915050505050509190803590602001908201803590602001908080601f01602080910402602001604051908101604052809392919081815260200183838082843782019150505050505091905050610b3b565b60405180806020018060200180602001851515151581526020018481038452888181518152602001915080519060200190808383600083146101c1575b8051825260208311156101c15760208201915060208101905060208303925061019d565b505050905090810190601f1680156101ed5780820380516001836020036101000a031916815260200191505b50848103835287818151815260200191508051906020019080838360008314610235575b80518252602083111561023557602082019150602081019050602083039250610211565b505050905090810190601f1680156102615780820380516001836020036101000a031916815260200191505b508481038252868181518152602001915080519060200190808383600083146102a9575b8051825260208311156102a957602082019150602081019050602083039250610285565b505050905090810190601f1680156102d55780820380516001836020036101000a031916815260200191505b5097505050505050505060405180910390f35b34156102f057fe5b6103c6600480803590602001908201803590602001908080601f0160208091040260200160405190810160405280939291908181526020018383808284378201915050505050509190803590602001908201803590602001908080601f0160208091040260200160405190810160405280939291908181526020018383808284378201915050505050509190803590602001908201803590602001908080601f0160208091040260200160405190810160405280939291908181526020018383808284378201915050505050509190505061109d565b604051808215151515815260200191505060405180910390f35b34156103e857fe5b610414600480803573ffffffffffffffffffffffffffffffffffffffff16906020019091905050611283565b604051808215151515815260200191505060405180910390f35b341561043657fe5b6104a5600480803573ffffffffffffffffffffffffffffffffffffffff1690602001909190803590602001908201803590602001908080601f0160208091040260200160405190810160405280939291908181526020018383808284378201915050505050509190505061138c565b604051808215151515815260200191505060405180910390f35b34156104c757fe5b6104cf61144f565b604051808060200182810382528381815181526020019150805190602001908083836000831461051e575b80518252602083111561051e576020820191506020810190506020830392506104fa565b505050905090810190601f16801561054a5780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b341561056057fe5b6105686114f8565b60405180806020018281038252838181518152602001915080519060200190808383600083146105b7575b8051825260208311156105b757602082019150602081019050602083039250610593565b505050905090810190601f1680156105e35780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b34156105f957fe5b6106cf600480803590602001908201803590602001908080601f0160208091040260200160405190810160405280939291908181526020018383808284378201915050505050509190803590602001908201803590602001908080601f0160208091040260200160405190810160405280939291908181526020018383808284378201915050505050509190803590602001908201803590602001908080601f016020809104026020016040519081016040528093929190818152602001838380828437820191505050505050919050506115a1565b005b34156106d957fe5b610748600480803573ffffffffffffffffffffffffffffffffffffffff1690602001909190803590602001908201803590602001908080601f0160208091040260200160405190810160405280939291908181526020018383808284378201915050505050509190505061194b565b604051808215151515815260200191505060405180910390f35b341561076a57fe5b610772611a0e565b60405180806020018281038252838181518152602001915080519060200190808383600083146107c1575b8051825260208311156107c15760208201915060208101905060208303925061079d565b505050905090810190601f1680156107ed5780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b341561080357fe5b610896600480803590602001908201803590602001908080601f0160208091040260200160405190810160405280939291908181526020018383808284378201915050505050509190803590602001908201803590602001908080601f01602080910402602001604051908101604052809392919081815260200183838082843782019150505050505091905050611aac565b604051808215151515815260200191505060405180910390f35b34156108b857fe5b610908600480803590602001908201803590602001908080601f01602080910402602001604051908101604052809392919081815260200183838082843782019150505050505091905050611cc1565b005b341561091257fe5b6109c4600480803590602001908201803590602001908080601f0160208091040260200160405190810160405280939291908181526020018383808284378201915050505050509190803590602001908201803590602001908080601f0160208091040260200160405190810160405280939291908181526020018383808284378201915050505050509190803573ffffffffffffffffffffffffffffffffffffffff16906020019091905050611cdc565b005b34156109ce57fe5b6109fa600480803573ffffffffffffffffffffffffffffffffffffffff16906020019091905050611e6c565b6040518080602001806020018573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200184151515158152602001838103835287818151815260200191508051906020019080838360008314610a89575b805182526020831115610a8957602082019150602081019050602083039250610a65565b505050905090810190601f168015610ab55780820380516001836020036101000a031916815260200191505b50838103825286818151815260200191508051906020019080838360008314610afd575b805182526020831115610afd57602082019150602081019050602083039250610ad9565b505050905090810190601f168015610b295780820380516001836020036101000a031916815260200191505b50965050505050505060405180910390f35b610b4361210a565b610b4b61210a565b610b5361210a565b60006002866040518082805190602001908083835b60208310610b8b5780518252602082019150602081019050602083039250610b68565b6001836020036101000a0380198251168184511680821785525050505050509050019150509081526020016040518091039020856040518082805190602001908083835b60208310610bf25780518252602082019150602081019050602083039250610bcf565b6001836020036101000a038019825116818451168082178552505050505050905001915050908152602001604051809103902060030160009054906101000a900460ff161561108e576002866040518082805190602001908083835b60208310610c715780518252602082019150602081019050602083039250610c4e565b6001836020036101000a0380198251168184511680821785525050505050509050019150509081526020016040518091039020856040518082805190602001908083835b60208310610cd85780518252602082019150602081019050602083039250610cb5565b6001836020036101000a03801982511681845116808217855250505050505090500191505090815260200160405180910390206000018054600181600116156101000203166002900480601f016020809104026020016040519081016040528092919081815260200182805460018160011615610100020316600290048015610da25780601f10610d7757610100808354040283529160200191610da2565b820191906000526020600020905b815481529060010190602001808311610d8557829003601f168201915b505050505093506002866040518082805190602001908083835b60208310610ddf5780518252602082019150602081019050602083039250610dbc565b6001836020036101000a0380198251168184511680821785525050505050509050019150509081526020016040518091039020856040518082805190602001908083835b60208310610e465780518252602082019150602081019050602083039250610e23565b6001836020036101000a03801982511681845116808217855250505050505090500191505090815260200160405180910390206001018054600181600116156101000203166002900480601f016020809104026020016040519081016040528092919081815260200182805460018160011615610100020316600290048015610f105780601f10610ee557610100808354040283529160200191610f10565b820191906000526020600020905b815481529060010190602001808311610ef357829003601f168201915b505050505092506002866040518082805190602001908083835b60208310610f4d5780518252602082019150602081019050602083039250610f2a565b6001836020036101000a0380198251168184511680821785525050505050509050019150509081526020016040518091039020856040518082805190602001908083835b60208310610fb45780518252602082019150602081019050602083039250610f91565b6001836020036101000a03801982511681845116808217855250505050505090500191505090815260200160405180910390206002018054600181600116156101000203166002900480601f01602080910402602001604051908101604052809291908181526020018280546001816001161561010002031660029004801561107e5780601f106110535761010080835404028352916020019161107e565b820191906000526020600020905b81548152906001019060200180831161106157829003601f168201915b5050505050915060019050611093565b600090505b5b92959194509250565b60006002846040518082805190602001908083835b602083106110d557805182526020820191506020810190506020830392506110b2565b6001836020036101000a0380198251168184511680821785525050505050509050019150509081526020016040518091039020836040518082805190602001908083835b6020831061113c5780518252602082019150602081019050602083039250611119565b6001836020036101000a038019825116818451168082178552505050505050905001915050908152602001604051809103902060030160009054906101000a900460ff161561127657816002856040518082805190602001908083835b602083106111bc5780518252602082019150602081019050602083039250611199565b6001836020036101000a0380198251168184511680821785525050505050509050019150509081526020016040518091039020846040518082805190602001908083835b602083106112235780518252602082019150602081019050602083039250611200565b6001836020036101000a0380198251168184511680821785525050505050509050019150509081526020016040518091039020600201908051906020019061126c92919061211e565b506001905061127b565b600090505b5b9392505050565b6000600360008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060020160149054906101000a900460ff161561138157600360008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600060008201600061132b919061219e565b60018201600061133b919061219e565b6002820160006101000a81549073ffffffffffffffffffffffffffffffffffffffff02191690556002820160146101000a81549060ff0219169055505060019050611386565b600090505b5b919050565b6000600360008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060020160149054906101000a900460ff16156114435781600360008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600001908051906020019061143992919061211e565b5060019050611448565b600090505b5b92915050565b61145761210a565b60018054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156114ed5780601f106114c2576101008083540402835291602001916114ed565b820191906000526020600020905b8154815290600101906020018083116114d057829003601f168201915b505050505090505b90565b61150061210a565b60008054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156115965780601f1061156b57610100808354040283529160200191611596565b820191906000526020600020905b81548152906001019060200180831161157957829003601f168201915b505050505090505b90565b826002846040518082805190602001908083835b602083106115d857805182526020820191506020810190506020830392506115b5565b6001836020036101000a0380198251168184511680821785525050505050509050019150509081526020016040518091039020836040518082805190602001908083835b6020831061163f578051825260208201915060208101905060208303925061161c565b6001836020036101000a0380198251168184511680821785525050505050509050019150509081526020016040518091039020600001908051906020019061168892919061211e565b50816002846040518082805190602001908083835b602083106116c0578051825260208201915060208101905060208303925061169d565b6001836020036101000a0380198251168184511680821785525050505050509050019150509081526020016040518091039020836040518082805190602001908083835b602083106117275780518252602082019150602081019050602083039250611704565b6001836020036101000a0380198251168184511680821785525050505050509050019150509081526020016040518091039020600101908051906020019061177092919061211e565b50806002846040518082805190602001908083835b602083106117a85780518252602082019150602081019050602083039250611785565b6001836020036101000a0380198251168184511680821785525050505050509050019150509081526020016040518091039020836040518082805190602001908083835b6020831061180f57805182526020820191506020810190506020830392506117ec565b6001836020036101000a0380198251168184511680821785525050505050509050019150509081526020016040518091039020600201908051906020019061185892919061211e565b5060016002846040518082805190602001908083835b60208310611891578051825260208201915060208101905060208303925061186e565b6001836020036101000a0380198251168184511680821785525050505050509050019150509081526020016040518091039020836040518082805190602001908083835b602083106118f857805182526020820191506020810190506020830392506118d5565b6001836020036101000a038019825116818451168082178552505050505050905001915050908152602001604051809103902060030160006101000a81548160ff0219169083151502179055505b505050565b6000600360008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060020160149054906101000a900460ff1615611a025781600360008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060010190805190602001906119f892919061211e565b5060019050611a07565b600090505b5b92915050565b60018054600181600116156101000203166002900480601f016020809104026020016040519081016040528092919081815260200182805460018160011615610100020316600290048015611aa45780601f10611a7957610100808354040283529160200191611aa4565b820191906000526020600020905b815481529060010190602001808311611a8757829003601f168201915b505050505081565b60006002836040518082805190602001908083835b60208310611ae45780518252602082019150602081019050602083039250611ac1565b6001836020036101000a0380198251168184511680821785525050505050509050019150509081526020016040518091039020826040518082805190602001908083835b60208310611b4b5780518252602082019150602081019050602083039250611b28565b6001836020036101000a038019825116818451168082178552505050505050905001915050908152602001604051809103902060030160009054906101000a900460ff1615611cb5576002836040518082805190602001908083835b60208310611bca5780518252602082019150602081019050602083039250611ba7565b6001836020036101000a0380198251168184511680821785525050505050509050019150509081526020016040518091039020826040518082805190602001908083835b60208310611c315780518252602082019150602081019050602083039250611c0e565b6001836020036101000a03801982511681845116808217855250505050505090500191505090815260200160405180910390206000600082016000611c76919061219e565b600182016000611c86919061219e565b600282016000611c96919061219e565b6003820160006101000a81549060ff0219169055505060019050611cba565b600090505b5b92915050565b8060019080519060200190611cd792919061211e565b505b50565b82600360008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206000019080519060200190611d3292919061211e565b5081600360008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206001019080519060200190611d8992919061211e565b5080600360008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060020160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055506001600360008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060020160146101000a81548160ff0219169083151502179055505b505050565b611e7461210a565b611e7c61210a565b60006000600360008673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060020160149054906101000a900460ff16156120fd57600360008673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206000018054600181600116156101000203166002900480601f016020809104026020016040519081016040528092919081815260200182805460018160011615610100020316600290048015611fab5780601f10611f8057610100808354040283529160200191611fab565b820191906000526020600020905b815481529060010190602001808311611f8e57829003601f168201915b50505050509350600360008673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206001018054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156120885780601f1061205d57610100808354040283529160200191612088565b820191906000526020600020905b81548152906001019060200180831161206b57829003601f168201915b50505050509250600360008673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060020160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16915060019050612102565b600090505b5b9193509193565b602060405190810160405280600081525090565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f1061215f57805160ff191683800117855561218d565b8280016001018555821561218d579182015b8281111561218c578251825591602001919060010190612171565b5b50905061219a91906121e6565b5090565b50805460018160011615610100020316600290046000825580601f106121c457506121e3565b601f0160209004906000526020600020908101906121e291906121e6565b5b50565b61220891905b808211156122045760008160009055506001016121ec565b5090565b905600a165627a7a72305820c3464142dfbc82d49586d5d57215bbc66749ec25f6043682f50f788eac9ab9fe0029',
            gas: '4700000'
        }, function (e, contract) {
            console.log(e, contract);
            if (typeof contract.address !== 'undefined') {
                console.log('Contract mined! address: ' + contract.address + ' transactionHash: ' + contract.transactionHash);
            }
        });

    return UserAccountInstance;
}

