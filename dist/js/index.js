/*button: login*/
function login() {
    var login_identity = String($("#login-pane input#login-identity").val());
    Nettoken.LoginCheck.call(login_identity, function (error, result) {
        if (!error) {
            Successful = result[0];
            if (Successful == true) {
                /*If it is true, it means that the identity is correct, and it is allowed to operate*/
                var dataroot = "data/user-data.json";
                var user_data;
                var priv;
                $.getJSON(dataroot, function (data) {
                    user_data = data.MainUser;
                    priv = user_data.private;
                    var encrypted_identity = aes_encrypt(priv, login_identity);
                    window.location.href="MyAccount.html?id="+encrypted_identity;
                });
            }
            else
                alert("Identity is incorrect!");
        }
        else
            console.error(error);
    });
}

/*button: register*/
function register() {
    /*get user input*/
    var RegisterID = String($("#register-pane input#RegisterID").val());
    var RegisterNickname = String($("#register-pane input#RegisterName").val());

    /*generate key pair*/
    var key = generate_ecdh_key();
    var pubpoint_key = getPubpoint(key);
    var pri_key = getPrivate(key);
    var pub_x1 = pubpoint_key[0];
    var pub_x2 = pubpoint_key[1];
    var pub_y1 = pubpoint_key[2];
    var pub_y2 = pubpoint_key[3];

    /*generate identity, store information and register*/
    Nettoken.getManagerPubkey.call(function (error, result) {
        if (!error) {
            /*generate identity*/
            var manager_pub_x1 = result[0];
            var manager_pub_x2 = result[1];
            var manager_pub_y1 = result[2];
            var manager_pub_y2 = result[3];
            manager_pub_x1 = web3.toAscii(manager_pub_x1);
            manager_pub_x2 = web3.toAscii(manager_pub_x2);
            manager_pub_y1 = web3.toAscii(manager_pub_y1);
            manager_pub_y2 = web3.toAscii(manager_pub_y2);
            var manager_pubkey_recover = recoverPubkey(manager_pub_x1, manager_pub_x2, manager_pub_y1, manager_pub_y2);
            var shared_key = getShared_key(pri_key, manager_pubkey_recover);
            var identity = padding_for_id(RegisterID);
            identity = aes_encrypt(shared_key, identity);
            identity = md5(identity);

            /*create UserAccount contract for new user*/
            Nettoken.newUserAccount.sendTransaction(identity, RegisterNickname, pub_x1, pub_x2, pub_y1, pub_y2, {
                from: web3.eth.accounts[0],
                data: '0x606060405260405160a08062002dc9833981016040528080519060200190919080519060200190919080519060200190919080519060200190919080519060200190919050505b8460008160001916905550836001600060048110151561006257fe5b0160005b508160001916905550826001600160048110151561008057fe5b0160005b508160001916905550816001600260048110151561009e57fe5b0160005b50816000191690555080600160036004811015156100bc57fe5b0160005b5081600019169055505b50505050505b612ce980620000e06000396000f30060606040523615610131576000357c0100000000000000000000000000000000000000000000000000000000900463ffffffff1680630cba6d27146101335780631046bc68146101595780631359fc911461018757806314ff89cd146101ca5780632e334452146102395780634259701b1461029457806347ec8d82146102ec5780635ac801fe146103225780636fca20231461033e5780637713b431146103645780637a79940d1461038a5780637cd4a826146103e257806387a07adb1461041057806389a7adcc1461049557806391f39f10146104be5780639994e1121461051e5780639b8eb7b41461058d5780639de315f1146105d8578063aa27cdf214610662578063b79eb3a414610694578063da7e019e146106f6578063e1c7f06a14610731578063e35d359014610786575bfe5b341561013b57fe5b6101436107bc565b6040518082815260200191505060405180910390f35b610185600480803573ffffffffffffffffffffffffffffffffffffffff169060200190919050506107ca565b005b6101c8600480803560001916906020019091908035600019169060200190919080356000191690602001909190803560001916906020019091905050610c41565b005b34156101d257fe5b6101e86004808035906020019091905050610cc0565b604051808373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200182600019166000191681526020019250505060405180910390f35b341561024157fe5b610249610d38565b60405180856000191660001916815260200184600019166000191681526020018360001916600019168152602001826000191660001916815260200194505050505060405180910390f35b341561029c57fe5b6102c360048080356000191690602001909190803560001916906020019091905050610da7565b604051808360001916600019168152602001821515151581526020019250505060405180910390f35b6103206004808035600019169060200190919080356000191690602001909190803560001916906020019091905050610e69565b005b61033c60048080356000191690602001909190505061101a565b005b341561034657fe5b61034e611029565b6040518082815260200191505060405180910390f35b341561036c57fe5b610374611037565b6040518082815260200191505060405180910390f35b341561039257fe5b6103b960048080356000191690602001909190803560001916906020019091905050611045565b604051808360001916600019168152602001821515151581526020019250505060405180910390f35b34156103ea57fe5b6103f2611107565b60405180826000191660001916815260200191505060405180910390f35b341561041857fe5b61042e600480803590602001909190505061110d565b60405180856000191660001916815260200184600019166000191681526020018373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200182815260200194505050505060405180910390f35b6104bc600480803560001916906020019091908035600019169060200190919050506111d9565b005b34156104c657fe5b6104dc6004808035906020019091905050611564565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b61058b600480803573ffffffffffffffffffffffffffffffffffffffff1690602001909190803560001916906020019091908035600019169060200190919080356000191690602001909190803560001916906020019091908035600019169060200190919050506115b3565b005b341561059557fe5b6105ab600480803590602001909190505061191f565b60405180836000191660001916815260200182600019166000191681526020019250505060405180910390f35b34156105e057fe5b61060c600480803573ffffffffffffffffffffffffffffffffffffffff16906020019091905050611977565b604051808660001916600019168152602001856000191660001916815260200184600019166000191681526020018360001916600019168152602001821515151581526020019550505050505060405180910390f35b61069260048080356000191690602001909190803560001916906020019091908035906020019091905050611abc565b005b6106f4600480803573ffffffffffffffffffffffffffffffffffffffff1690602001909190803560001916906020019091908035600019169060200190919080356000191690602001909190803560001916906020019091905050611fe6565b005b61072f600480803573ffffffffffffffffffffffffffffffffffffffff16906020019091908035600019169060200190919050506121f7565b005b610784600480803560001916906020019091908035600019169060200190919080356000191690602001909190803573ffffffffffffffffffffffffffffffffffffffff169060200190919050506123bd565b005b6107ba60048080356000191690602001909190803560001916906020019091908035600019169060200190919050506126d1565b005b600060058054905090505b90565b60006000600860008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060010160009054906101000a900460ff1615156108b7577fcf34ef537ac33ee1ac626ca1587a0a7e8e51561e5514f8cb36afa1c5102b3bab60405180806020018281038252602b8152602001807f4661696c656421205468657265206973206e6f207375636820636f6e7461637481526020017f20746f2064656c6574652100000000000000000000000000000000000000000081525060400191505060405180910390a1610c3b565b600860008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060000154915060078281548110151561090b57fe5b906000526020600020906006020160005b6000820160006101000a81549073ffffffffffffffffffffffffffffffffffffffff0219169055600182016000905560028201600061095b919061295d565b5050600860008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600060008201600090556001820160006101000a81549060ff0219169055505060076001600780549050038154811015156109d357fe5b906000526020600020906006020160005b506007838154811015156109f457fe5b906000526020600020906006020160005b506000820160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff168160000160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550600182015481600101906000191690556002820181600201906004610a93929190612979565b509050506007600160078054905003815481101515610aae57fe5b906000526020600020906006020160005b5060000160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16905081600860008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600001819055506007600160078054905003815481101515610b4457fe5b906000526020600020906006020160005b6000820160006101000a81549073ffffffffffffffffffffffffffffffffffffffff02191690556001820160009055600282016000610b94919061295d565b50506007805480919060019003610bab91906129b6565b507fcf34ef537ac33ee1ac626ca1587a0a7e8e51561e5514f8cb36afa1c5102b3bab6040518080602001828103825260218152602001807f5375636365737366756c6c792064656c657465642074686520636f6e7461637481526020017f2e0000000000000000000000000000000000000000000000000000000000000081525060400191505060405180910390a15b5b505050565b8360016000600481101515610c5257fe5b0160005b5081600019169055508260016001600481101515610c7057fe5b0160005b5081600019169055508160016002600481101515610c8e57fe5b0160005b5081600019169055508060016003600481101515610cac57fe5b0160005b5081600019169055505b50505050565b60006000600783815481101515610cd357fe5b906000526020600020906006020160005b5060000160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff169150600783815481101515610d1a57fe5b906000526020600020906006020160005b506001015490505b915091565b600060006000600060016000600481101515610d5057fe5b0160005b5054935060016001600481101515610d6857fe5b0160005b5054925060016002600481101515610d8057fe5b0160005b5054915060016003600481101515610d9857fe5b0160005b505490505b90919293565b600060006006600085600019166000191681526020019081526020016000206000846000191660001916815260200190815260200160002060010160009054906101000a900460ff1615610e5c5760056006600086600019166000191681526020019081526020016000206000856000191660001916815260200190815260200160002060000154815481101515610e3b57fe5b906000526020600020906003020160005b5060020154915060019050610e61565b600090505b5b9250929050565b6006600084600019166000191681526020019081526020016000206000836000191660001916815260200190815260200160002060010160009054906101000a900460ff161515610f21577fcf34ef537ac33ee1ac626ca1587a0a7e8e51561e5514f8cb36afa1c5102b3bab6040518080602001828103825260208152602001807f4661696c656421205468657265206973206e6f2073756368207265636f72642e81525060200191505060405180910390a1611014565b8060056006600086600019166000191681526020019081526020016000206000856000191660001916815260200190815260200160002060000154815481101515610f6857fe5b906000526020600020906003020160005b5060020181600019169055507fcf34ef537ac33ee1ac626ca1587a0a7e8e51561e5514f8cb36afa1c5102b3bab6040518080602001828103825260238152602001807f5375636365737366756c6c79206d6f646966696564207468652070617373776f81526020017f72642e000000000000000000000000000000000000000000000000000000000081525060400191505060405180910390a15b5b505050565b80600081600019169055505b50565b600060098054905090505b90565b600060078054905090505b90565b60006000600a600085600019166000191681526020019081526020016000206000846000191660001916815260200190815260200160002060010160009054906101000a900460ff16156110fa576009600a6000866000191660001916815260200190815260200160002060008560001916600019168152602001908152602001600020600001548154811015156110d957fe5b906000526020600020906005020160005b50600201549150600190506110ff565b600090505b5b9250929050565b60005481565b600060006000600060098581548110151561112457fe5b906000526020600020906005020160005b5060000154935060098581548110151561114b57fe5b906000526020600020906005020160005b5060010154925060098581548110151561117257fe5b906000526020600020906005020160005b5060030160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1691506009858154811015156111b957fe5b906000526020600020906005020160005b506004015490505b9193509193565b6000600060006006600086600019166000191681526020019081526020016000206000856000191660001916815260200190815260200160002060010160009054906101000a900460ff16156114f3576006600086600019166000191681526020019081526020016000206000856000191660001916815260200190815260200160002060000154925060058381548110151561127257fe5b906000526020600020906003020160005b600082016000905560018201600090556002820160009055505060066000866000191660001916815260200190815260200160002060008560001916600019168152602001908152602001600020600060008201600090556001820160006101000a81549060ff02191690555050600560016005805490500381548110151561130857fe5b906000526020600020906003020160005b5060058481548110151561132957fe5b906000526020600020906003020160005b50600082015481600001906000191690556001820154816001019060001916905560028201548160020190600019169055905050600560016005805490500381548110151561138557fe5b906000526020600020906003020160005b5060000154915060056001600580549050038154811015156113b457fe5b906000526020600020906003020160005b50600101549050826006600084600019166000191681526020019081526020016000206000836000191660001916815260200190815260200160002060000181905550600560016005805490500381548110151561141f57fe5b906000526020600020906003020160005b6000820160009055600182016000905560028201600090555050600580548091906001900361145f91906129e8565b507fcf34ef537ac33ee1ac626ca1587a0a7e8e51561e5514f8cb36afa1c5102b3bab6040518080602001828103825260228152602001807f5375636365737366756c6c792064656c657465642074686174206163636f756e81526020017f742e00000000000000000000000000000000000000000000000000000000000081525060400191505060405180910390a161155c565b7fcf34ef537ac33ee1ac626ca1587a0a7e8e51561e5514f8cb36afa1c5102b3bab6040518080602001828103825260208152602001807f4661696c656421205468657265206973206e6f2073756368207265636f72642e81525060200191505060405180910390a15b5b5050505050565b600060078281548110151561157557fe5b906000526020600020906006020160005b5060000160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1690505b919050565b6115bb612a1a565b600860008873ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060010160009054906101000a900460ff161515611886578481600060048110151561162157fe5b602002019060001916908160001916815250508381600160048110151561164457fe5b602002019060001916908160001916815250508281600260048110151561166757fe5b602002019060001916908160001916815250508181600360048110151561168a57fe5b60200201906000191690816000191681525050600780548060010182816116b19190612a46565b916000526020600020906006020160005b6060604051908101604052808b73ffffffffffffffffffffffffffffffffffffffff1681526020018a60001916815260200185815250909190915060008201518160000160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055506020820151816001019060001916905560408201518160020190600461176b929190612a78565b50505050600160078054905003600860008973ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600001819055506001600860008973ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060010160006101000a81548160ff0219169083151502179055507fcf34ef537ac33ee1ac626ca1587a0a7e8e51561e5514f8cb36afa1c5102b3bab60405180806020018281038252601f8152602001807f5375636365737366756c6c792061646465642074686520636f6e746163742e0081525060200191505060405180910390a1611915565b7fcf34ef537ac33ee1ac626ca1587a0a7e8e51561e5514f8cb36afa1c5102b3bab6040518080602001828103825260248152602001807f4661696c656421205468657265206578697374696e67207375636820636f6e7481526020017f616374210000000000000000000000000000000000000000000000000000000081525060400191505060405180910390a15b5b50505050505050565b6000600060058381548110151561193257fe5b906000526020600020906003020160005b5060000154915060058381548110151561195957fe5b906000526020600020906003020160005b506001015490505b915091565b6000600060006000600060006000600860008973ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060010160009054906101000a900460ff1615156119e45760009250611ab0565b600860008973ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600001549150600782815481101515611a3857fe5b906000526020600020906006020160005b506002019050806000600481101515611a5e57fe5b0160005b50549650806001600481101515611a7557fe5b0160005b50549550806002600481101515611a8c57fe5b0160005b50549450806003600481101515611aa357fe5b0160005b50549350600192505b5b505091939590929450565b60006000600060006000600a600089600019166000191681526020019081526020016000206000886000191660001916815260200190815260200160002060010160009054906101000a900460ff1615611f7257600a6000896000191660001916815260200190815260200160002060008860001916600019168152602001908152602001600020600001549450600985815481101515611b5957fe5b906000526020600020906005020160005b5060040154935042925085848403101515611ede57600985815481101515611b8e57fe5b906000526020600020906005020160005b6000820160009055600182016000905560028201600090556003820160006101000a81549073ffffffffffffffffffffffffffffffffffffffff021916905560048201600090555050600a6000896000191660001916815260200190815260200160002060008860001916600019168152602001908152602001600020600060008201600090556001820160006101000a81549060ff021916905550506009600160098054905003815481101515611c5357fe5b906000526020600020906005020160005b50600986815481101515611c7457fe5b906000526020600020906005020160005b506000820154816000019060001916905560018201548160010190600019169055600282015481600201906000191690556003820160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff168160030160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550600482015481600401559050506009600160098054905003815481101515611d4157fe5b906000526020600020906005020160005b506000015491506009600160098054905003815481101515611d7057fe5b906000526020600020906005020160005b5060010154905084600a6000846000191660001916815260200190815260200160002060008360001916600019168152602001908152602001600020600001819055506009600160098054905003815481101515611ddb57fe5b906000526020600020906005020160005b6000820160009055600182016000905560028201600090556003820160006101000a81549073ffffffffffffffffffffffffffffffffffffffff0219169055600482016000905550506009805480919060019003611e4a9190612abe565b507fcf34ef537ac33ee1ac626ca1587a0a7e8e51561e5514f8cb36afa1c5102b3bab6040518080602001828103825260398152602001807f5468652074617267657420736861726564206163636f756e7420697320696e7681526020017f616c69642073696e6365206974206973206f7665726475652e0000000000000081525060400191505060405180910390a1611f6d565b7fcf34ef537ac33ee1ac626ca1587a0a7e8e51561e5514f8cb36afa1c5102b3bab6040518080602001828103825260388152602001807f5468652074617267657420736861726564206163636f756e742069732076616c81526020017f69642c20746875732069742063616e20626520757365642e000000000000000081525060400191505060405180910390a15b611fdb565b7fcf34ef537ac33ee1ac626ca1587a0a7e8e51561e5514f8cb36afa1c5102b3bab6040518080602001828103825260208152602001807f4661696c656421205468657265206973206e6f2073756368207265636f72642e81525060200191505060405180910390a15b5b5050505050505050565b600860008673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060010160009054906101000a900460ff1615156120a9577fcf34ef537ac33ee1ac626ca1587a0a7e8e51561e5514f8cb36afa1c5102b3bab6040518080602001828103825260208152602001807f4661696c656421205468657265206973206e6f2073756368207265636f72642e81525060200191505060405180910390a16121ef565b6080604051908101604052808560001916600019168152602001846000191660001916815260200183600019166000191681526020018260001916600019168152506007600860008873ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206000015481548110151561213c57fe5b906000526020600020906006020160005b5060020190600461215f929190612af0565b507fcf34ef537ac33ee1ac626ca1587a0a7e8e51561e5514f8cb36afa1c5102b3bab60405180806020018281038252602d8152602001807f5375636365737366756c6c79206d6f6469666965642074686520636f6e74616381526020017f74207075626c6963206b65792e0000000000000000000000000000000000000081525060400191505060405180910390a15b5b5050505050565b600860008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060010160009054906101000a900460ff1615156122ba577fcf34ef537ac33ee1ac626ca1587a0a7e8e51561e5514f8cb36afa1c5102b3bab6040518080602001828103825260208152602001807f4661696c656421205468657265206973206e6f2073756368207265636f72642e81525060200191505060405180910390a16123b8565b806007600860008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206000015481548110151561230c57fe5b906000526020600020906006020160005b5060010181600019169055507fcf34ef537ac33ee1ac626ca1587a0a7e8e51561e5514f8cb36afa1c5102b3bab6040518080602001828103825260278152602001807f5375636365737366756c6c79206d6f6469666965642074686520636f6e74616381526020017f74206e616d652e0000000000000000000000000000000000000000000000000081525060400191505060405180910390a15b5b5050565b600a600085600019166000191681526020019081526020016000206000846000191660001916815260200190815260200160002060010160009054906101000a900460ff161561253d576009600a60008660001916600019168152602001908152602001600020600085600019166000191681526020019081526020016000206000015481548110151561244d57fe5b906000526020600020906005020160005b50600201546000191682600019161415156124d857816009600a6000876000191660001916815260200190815260200160002060008660001916600019168152602001908152602001600020600001548154811015156124ba57fe5b906000526020600020906005020160005b5060020181600019169055505b426009600a60008760001916600019168152602001908152602001600020600086600019166000191681526020019081526020016000206000015481548110151561251f57fe5b906000526020600020906005020160005b50600401819055506126ca565b600980548060010182816125519190612b36565b916000526020600020906005020160005b60a0604051908101604052808860001916815260200187600019168152602001866000191681526020018573ffffffffffffffffffffffffffffffffffffffff16815260200142815250909190915060008201518160000190600019169055602082015181600101906000191690556040820151816002019060001916905560608201518160030160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550608082015181600401555050506001600a600086600019166000191681526020019081526020016000206000856000191660001916815260200190815260200160002060010160006101000a81548160ff021916908315150217905550600160098054905003600a6000866000191660001916815260200190815260200160002060008560001916600019168152602001908152602001600020600001819055505b5b50505050565b6006600084600019166000191681526020019081526020016000206000836000191660001916815260200190815260200160002060010160009054906101000a900460ff1615156128c857600580548060010182816127309190612b68565b916000526020600020906003020160005b606060405190810160405280876000191681526020018660001916815260200185600019168152509091909150600082015181600001906000191690556020820151816001019060001916905560408201518160020190600019169055505050600160058054905003600660008560001916600019168152602001908152602001600020600084600019166000191681526020019081526020016000206000018190555060016006600085600019166000191681526020019081526020016000206000846000191660001916815260200190815260200160002060010160006101000a81548160ff0219169083151502179055507fcf34ef537ac33ee1ac626ca1587a0a7e8e51561e5514f8cb36afa1c5102b3bab60405180806020018281038252602e8152602001807f5375636365737366756c6c792061646465642061207265636f7264206f66207381526020017f6f6369616c206163636f756e742e00000000000000000000000000000000000081525060400191505060405180910390a1612957565b7fcf34ef537ac33ee1ac626ca1587a0a7e8e51561e5514f8cb36afa1c5102b3bab6040518080602001828103825260238152602001807f4661696c656421205468657265206578697374696e672073756368207265636f81526020017f72642e000000000000000000000000000000000000000000000000000000000081525060400191505060405180910390a15b5b505050565b5060008155600101600081556001016000815560010160009055565b82600481019282156129a5579182015b828111156129a4578254825591600101919060010190612989565b5b5090506129b29190612b9a565b5090565b8154818355818115116129e3576006028160060283600052602060002091820191016129e29190612bbf565b5b505050565b815481835581811511612a1557600302816003028360005260206000209182019101612a149190612c1e565b5b505050565b6080604051908101604052806004905b600060001916815260200190600190039081612a2a5790505090565b815481835581811511612a7357600602816006028360005260206000209182019101612a729190612bbf565b5b505050565b8260048101928215612aad579160200282015b82811115612aac578251829060001916905591602001919060010190612a8b565b5b509050612aba9190612b9a565b5090565b815481835581811511612aeb57600502816005028360005260206000209182019101612aea9190612c56565b5b505050565b8260048101928215612b25579160200282015b82811115612b24578251829060001916905591602001919060010190612b03565b5b509050612b329190612b9a565b5090565b815481835581811511612b6357600502816005028360005260206000209182019101612b629190612c56565b5b505050565b815481835581811511612b9557600302816003028360005260206000209182019101612b949190612c1e565b5b505050565b612bbc91905b80821115612bb8576000816000905550600101612ba0565b5090565b90565b612c1b91905b80821115612c175760006000820160006101000a81549073ffffffffffffffffffffffffffffffffffffffff02191690556001820160009055600282016000612c0e919061295d565b50600601612bc5565b5090565b90565b612c5391905b80821115612c4f57600060008201600090556001820160009055600282016000905550600301612c24565b5090565b90565b612cba91905b80821115612cb65760006000820160009055600182016000905560028201600090556003820160006101000a81549073ffffffffffffffffffffffffffffffffffffffff0219169055600482016000905550600501612c5c565b5090565b905600a165627a7a72305820032e9a1b32c950c505ea3ab0168027c8b7fec1c3e8ac8423ce09dc3cf0947e190029',
                gas: '5000000'
            }, function (error, result) {
                if (error)
                    console.error(error);
                else {
                    /*store user information*/
                    var json_data = {};
                    json_data.identity = identity;
                    json_data.Nickname = RegisterNickname;
                    json_data.private = pri_key;
                    json_data.public_x1 = pub_x1;
                    json_data.public_x2 = pub_x2;
                    json_data.public_y1 = pub_y1;
                    json_data.public_y2 = pub_y2;
                    json_data = JSON.stringify(json_data);
                    console.log("data for new user is:" + json_data);
                }
            });
        }
        else
            console.error(error);
    });
}

/*button: to register*/
function to_register() {
    document.getElementById("login-pane").style.display = "none";
    document.getElementById("register-pane").style.display = "block";
}
/*button: to login*/
function to_login() {
    document.getElementById("register-pane").style.display = "none";
    document.getElementById("login-pane").style.display = "block";
}

/*set the Timelimited for TokenFunctions contract*/
function setTimeLimited() {
    var newTimeLimited = Number($("input#newTimelimited").val());
    var checkTimeFormat = isNaN(newTimeLimited);
    if (checkTimeFormat) {
        alert("The format is incorrect!");
    }
    else {
        Nettoken.setTimeLimited.sendTransaction(newTimeLimited, {from: web3.eth.accounts[0]});
    }

}



